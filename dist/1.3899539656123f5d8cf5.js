(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+Loa":function(n,t,l){"use strict";l.r(t);var e=l("CcnG"),i=l("nCHe");function u(n){var t={},l=[];n.transactions.forEach(function(n){var e=new Date(n.date);parseInt(e.getFullYear()+""+e.getMonth(),-1),null!=t[-1]?(t[-1].numberOfTransactions+=1,t[-1].totalAmount+=n.value):(l.push(-1),t[-1]={numberOfTransactions:1,totalAmount:n.value,assumedValue:!1})});var e={monthDictionary:t,monthIndexes:function(n){return n.sort(function(n,t){return n<t?-1:n>t?1:0})}(l)};return function(n){var t=!1;return n.monthIndexes.reverse().splice(0,12).forEach(function(l){0===n.monthDictionary[l].totalAmount&&(t=!0)}),t}(e)&&function(n,t){n.monthIndexes.splice(0,12).forEach(function(l){0===n.monthDictionary[l].totalAmount&&(n.monthDictionary[l].totalAmount=t,n.monthDictionary[l].assumedValue=!0)})}(e,function(n){var t=0,l=0;return n.monthIndexes.forEach(function(e){n.monthDictionary[e].totalAmount>0&&(t+=1,l+=n.monthDictionary[e].totalAmount)}),l/t}(e)),e}var o=function(){function n(n){this.amountsAbove=n}return n.prototype.isValid=function(n){if(n.amountRequested>this.amountsAbove){var t=u(n);return!(t.monthIndexes.length<12||t.monthIndexes.splice(0,12).some(function(n){return 0===t.monthDictionary[n].totalAmount||t.monthDictionary[n].assumedValue}))}return!0},n}(),a=function(){function n(n,t){this.minAmount=n,this.maxAmount=t}return n.prototype.isValid=function(n){return n.amountRequested>=this.minAmount&&n.amountRequested<=this.maxAmount},n}(),r=function(){function n(n){this.numberOfMonths=n}return n.prototype.isValid=function(n){return 12*n.timeInBusiness.years+n.timeInBusiness.months>=this.numberOfMonths},n}(),s=function(){function n(){}return n.prototype.isValid=function(n){var t=u(n);return!t.monthIndexes.some(function(l){var e=t.monthDictionary[l];return e.totalAmount/e.numberOfTransactions<n.amountRequested})},n}(),c=function(){function n(){this.eligibilityRules=[new o(25e3),new a(5e3,5e4),new r(12),new s]}return n.prototype.checkEligibility=function(n){return!this.eligibilityRules.some(function(t){return!1===t.isValid(n)})},n}(),m=function(){function n(n,t){this.toastrService=n,this.businessCashAdvanceService=t}return n.prototype.checkEligibility=function(){this.businessCashAdvanceService.checkEligibility(this.businessInput)?this.toastrService.success("Based on your input file the system has determined you are eligible!","BCA Eligibility Result"):this.toastrService.warning("Unfortunately based on your input file you do not meet the BCA criteria","BCA Eligibility Result")},n.prototype.fileSelect=function(n){var t=this,l=new FileReader;try{if(n.target.files&&n.target.files.length>0){var e=n.target.files[0];l.readAsText(e),l.onload=function(){try{t.filename=e.name,console.log(e.name),t.businessInput=JSON.parse(l.result.toString())}catch(n){t.toastrService.error("The file submitted is not in the correct format"),t.filename=""}}}}catch(n){this.toastrService.error("The file submitted is not in the correct format"),this.filename=""}},n}(),d=function(){},g=l("gIcY"),h=e.Ja({encapsulation:0,styles:[["#form[_ngcontent-%COMP%]{padding:20px}.image-upload[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{display:none}.attach-doc[_ngcontent-%COMP%]{cursor:pointer}h3[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], label[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{color:#808285}h3[_ngcontent-%COMP%]{margin-bottom:20px;margin-top:20px}.button-file[_ngcontent-%COMP%]{border-radius:0;margin:0;color:#fff}p[_ngcontent-%COMP%]{margin-bottom:30px}.btn-file[_ngcontent-%COMP%]{position:relative;overflow:hidden}label[_ngcontent-%COMP%]{width:110px}input[type=file][_ngcontent-%COMP%]{width:100px;visibility:hidden;margin:0;text-align:center;padding:0 px}[hidden][_ngcontent-%COMP%]{display:none!important}.form-group[_ngcontent-%COMP%]{margin-bottom:25px}"]],data:{}});function f(n){return e.Xa(0,[(n()(),e.La(0,0,null,null,1,"h3",[],null,null,null,null,null)),(n()(),e.Wa(-1,null,["BCA Eligibility Checker"])),(n()(),e.La(2,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),e.Wa(-1,null,["Upload your file to determine if you are eligible for a Business Cash Advance."])),(n()(),e.La(4,0,null,null,15,"form",[["name","uploadForm"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(n,t,l){var i=!0,u=n.component;return"submit"===t&&(i=!1!==e.Ta(n,6).onSubmit(l)&&i),"reset"===t&&(i=!1!==e.Ta(n,6).onReset()&&i),"ngSubmit"===t&&(i=!1!==u.checkEligibility()&&i),i},null,null)),e.Ka(5,16384,null,0,g.l,[],null,null),e.Ka(6,4210688,[["theForm",4]],0,g.i,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),e.Ua(2048,null,g.b,null,[g.i]),e.Ka(8,16384,null,0,g.h,[[4,g.b]],null,null),(n()(),e.La(9,0,null,null,9,"div",[["class","form-group input-group"]],null,null,null,null,null)),(n()(),e.La(10,0,[["selectedFile",1]],null,5,"input",[["class","form-control"],["id","selectedFile"],["name","selectedFile"],["readonly",""],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,t,l){var i=!0,u=n.component;return"input"===t&&(i=!1!==e.Ta(n,11)._handleInput(l.target.value)&&i),"blur"===t&&(i=!1!==e.Ta(n,11).onTouched()&&i),"compositionstart"===t&&(i=!1!==e.Ta(n,11)._compositionStart()&&i),"compositionend"===t&&(i=!1!==e.Ta(n,11)._compositionEnd(l.target.value)&&i),"ngModelChange"===t&&(i=!1!==(u.filename=l)&&i),i},null,null)),e.Ka(11,16384,null,0,g.c,[e.B,e.k,[2,g.a]],null,null),e.Ua(1024,null,g.e,function(n){return[n]},[g.c]),e.Ka(13,671744,null,0,g.j,[[2,g.b],[8,null],[8,null],[6,g.e]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Ua(2048,null,g.f,null,[g.j]),e.Ka(15,16384,null,0,g.g,[[4,g.f]],null,null),(n()(),e.La(16,0,null,null,2,"label",[["class","btn btn-primary button-file"]],null,null,null,null,null)),(n()(),e.Wa(-1,null,[" Select File "])),(n()(),e.La(18,0,[["fileinput",1]],null,0,"input",[["id","selectFile"],["name","selectFile"],["type","file"]],null,[[null,"change"]],function(n,t,l){var e=!0;return"change"===t&&(e=!1!==n.component.fileSelect(l)&&e),e},null,null)),(n()(),e.La(19,0,null,null,0,"input",[["class","btn btn-primary"],["id","submit"],["name","submit"],["type","submit"],["value","Check Eligibility"]],null,null,null,null,null))],function(n,t){n(t,13,0,"selectedFile",t.component.filename)},function(n,t){n(t,4,0,e.Ta(t,8).ngClassUntouched,e.Ta(t,8).ngClassTouched,e.Ta(t,8).ngClassPristine,e.Ta(t,8).ngClassDirty,e.Ta(t,8).ngClassValid,e.Ta(t,8).ngClassInvalid,e.Ta(t,8).ngClassPending),n(t,10,0,e.Ta(t,15).ngClassUntouched,e.Ta(t,15).ngClassTouched,e.Ta(t,15).ngClassPristine,e.Ta(t,15).ngClassDirty,e.Ta(t,15).ngClassValid,e.Ta(t,15).ngClassInvalid,e.Ta(t,15).ngClassPending)})}var p=e.Ha("ng-component",m,function(n){return e.Xa(0,[(n()(),e.La(0,0,null,null,1,"ng-component",[],null,null,null,f,h)),e.Ka(1,49152,null,0,m,[i.a,c],null,null)],null,null)},{},{},[]),b=l("Ip0R"),y=l("PCNd"),v=l("ZYCi");l.d(t,"EligibilityModuleNgFactory",function(){return C});var C=e.Ia(d,[],function(n){return e.Ra([e.Sa(512,e.j,e.Y,[[8,[p]],[3,e.j],e.v]),e.Sa(4608,b.i,b.h,[e.s,[2,b.m]]),e.Sa(4608,g.m,g.m,[]),e.Sa(4608,c,c,[]),e.Sa(1073742336,b.b,b.b,[]),e.Sa(1073742336,g.k,g.k,[]),e.Sa(1073742336,g.d,g.d,[]),e.Sa(1073742336,y.a,y.a,[]),e.Sa(1073742336,v.l,v.l,[[2,v.q],[2,v.k]]),e.Sa(1073742336,d,d,[]),e.Sa(1024,v.i,function(){return[[{path:"",component:m}]]},[])])})}}]);